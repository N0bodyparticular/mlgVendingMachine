<!doctype HTML>
<html>
    <head>
        <meta encoding="UTF-8" />
        <title>The Fully Sick MLG Vending Machine</title>
        <link rel="stylesheet" type="text/css" href="machine.css">
    </head>

    <body>
        <h1>The MLG Vending Machine</h1>

        <div class="money">
            <!-- Ryan work here now-->
            <table>
                <tr>
                    <td> $10</td>
                    <td> $5</td>
                </tr>
                <tr>
                    <td> $2</td>
                    <td> $1</td>
                </tr>
                <tr>
                    <td> 50c</td>
                    <td> 20c</td>
                </tr>
                <tr>
                    <td> 10c</td>
                    <td> 5c</td>
                </tr>
            </table>
        </div>
        
        <div class="machine-body">
            <img src="machine.png">

            <div class="machine-items">
                <ul>
                    <li>
                        Mountain Dew
                    </li>
                    <li>
                        Doritos
                    </li>
                    <li>
                        Ash's head hitbox
                    </li>
                    <li>
                        AimBot
                    </li>
                    <li>
                        No Skope
                    </li>
                    <li>
                        FaZe Membership
                    </li>
                    <li>
                        Obnoxious Xbox Gamertag
                    </li>
                    <li>
                        24 hour Xbox Live Voucher
                    </li>
                    
                </ul>
            </div>
        </div>

        <div id="admin-hidden">
            <h2>Hidden Admin Section</h2>

            <table border=1 id="items-table"> <!-- This table is populated by javascript when it is viewed, it is intentionally empty. -->
                <tr>
                    <td>Stock Item</td>
                    <td>Count Remaining</td>
                </tr>                
            </table>

            
        </div>
        <br/><br/>

        <script>
            let items = [];
            let default_count = 10;
            let items_table_reset_text = '';


            function generate_item(item_cost, item_name, item_id, item_count) {
                let temp = {};
                temp.name = '' + item_name;
                temp.cost = item_cost;
                temp.id = item_id;
                temp.count = item_count;
                console.log(item_name);
                return temp; // Generate an item with the values and retrun it so it can be added to the data.
            }

            function update_items_table() {
                let items_table = document.getElementById("items-table");

                items_table.innerHTML = items_table_reset_text;
                for (let item_idx = 0; item_idx < items.length; item_idx = item_idx + 1) {
                    let build_string = "<tr><td>" + items[item_idx].item_name + "</td><td>$" + items[item_idx].cost + "</td><td>" + items[item_idx].count + "</td></tr>";
                    items_table.innerHTML = items_table.innerHTML + build_string;
                }  

                console.log("Updated items table html:");
                console.log(items_table.innerHTML);
            }
            


            function init_machine() {
                items = []; // generate the items in the inventory 
                items.push(generate_item(2.50, "Mountain Dew", 1, 10));
                items.push(generate_item(2.50, "Doritos",                      2, 10));
                items.push(generate_item(2.50, "Ash's Head Hitbox",            3, 10));
                items.push(generate_item(2.50, "AimBot",                       4, 10));
                items.push(generate_item(2.50, "No Skope",                     5, 10));
                items.push(generate_item(2.50, "FaZe Membership",              6, 10));
                items.push(generate_item(2.50, "Obnoxious Xbox Live Gamertag", 7, 10));
                items.push(generate_item(2.50, "24 Hour Xbox Live Voucher",    8, 10));
                

                items_table_reset_text = document.getElementById("items-table").innerHTML;
                update_items_table();
            }


            init_machine();
        </script>
    </body>
</html>